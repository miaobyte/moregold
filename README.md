# 金价监控系统

自动采集金价并保存为每日 CSV，同时计算基础技术指标。

## 功能

- 定时采集（默认每 5 分钟）
- USD/盎司 与 CNY/克
- CSV 按日期存档
- 基础技术分析（MA、波动率、趋势）

## 使用

运行采集脚本：

python3 gold_price_fetcher.py

输出文件：脚本同目录下 gold_YYYY-MM-DD.csv

运行卖出监控（读取 CSV）：

python3 gold_sell_monitor.py --cost 1120

可选参数：
- --grams 持仓克数（默认 250）
- --t1 止盈1（CNY/克）
- --t2 止盈2（CNY/克）
- --stop 止损（CNY/克）
- --no-trade 不可交易区间（默认 02:00-09:10）
- --poll 轮询秒数（默认 5）

## 数据格式

CSV 列：时间,金价(USD/盎司),金价(CNY/克)

换算：$CNY/克=(USD/盎司 ÷ 31.1035) × 汇率$

## 优化建议

- 采集端用 `requests` 等原生库替代 `curl` 子进程，统一超时与重试，减少启动开销。
- 汇率与金价接口增加可配置缓存/重试，避免高频失败时反复请求。
- 监控端每次轮询整文件读取，建议记录文件偏移或只解析新增行，降低 I/O。
- 指标计算可做增量更新（滑动窗口），避免重复遍历全量价格序列。
- 主循环中 0.05s 忙等可改为精确睡眠/调度，降低 CPU 占用。
- CSV 行解析增加异常校验，忽略格式异常行，提升稳定性。

## 风险提示

仅供学习与研究，不构成投资建议。数据来自第三方接口，可能延迟或不可用。
